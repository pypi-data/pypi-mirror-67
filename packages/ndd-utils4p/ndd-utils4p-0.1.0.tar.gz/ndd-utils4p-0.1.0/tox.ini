# Tox configuration file
# Read more under https://tox.readthedocs.org/

[tox]

minversion = 3.13

# Dependencies versions:
# - PyYAML 4.1 does not exist
#
# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃ DO NOT FORGET TO CHANGE .gitlab-ci.yaml TOO ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
#
envlist =
    # Too many environments:
    # py36-gitpython_{3_0,3_1}-jinja2_{2_8,2_9,2_10,2_11}-jsonschema_{3_0,3_1,3_2}-pyyaml_{5_3,5_2,5_1,3_13},
    # py37-gitpython_{3_0,3_1}-jinja2_{2_8,2_9,2_10,2_11}-jsonschema_{3_0,3_1,3_2}-pyyaml_{5_3,5_2,5_1,3_13},
    # py38-gitpython_{3_0,3_1}-jinja2_{2_8,2_9,2_10,2_11}-jsonschema_{3_0,3_1,3_2}-pyyaml_{5_3,5_2,5_1,3_13},
    # Only the lowest and the highest versions:
    py36-gitpython_{3_0,3_1}-jinja2_{2_8,2_11}-jsonschema_{3_0,3_2}-pyyaml_{3_13,5_1,5_3},
    py37-gitpython_{3_0,3_1}-jinja2_{2_8,2_11}-jsonschema_{3_0,3_2}-pyyaml_{3_13,5_1,5_3},
    py38-gitpython_{3_0,3_1}-jinja2_{2_8,2_11}-jsonschema_{3_0,3_2}-pyyaml_{3_13,5_1,5_3},



[testenv]

deps =
    gitpython_3_0: gitpython >=3.0, <3.1
    gitpython_3_1: gitpython >=3.1, <3.2
    jinja2_2_8:  jinja2 >=2.8, <2.9
    jinja2_2_9:  jinja2 >=2.9, <2.10
    jinja2_2_10: jinja2 >=2.10, <2.11
    jinja2_2_11: jinja2 >=2.11, <2.12
    jsonschema_3_0: jsonschema >= 3.0, <3.1
    jsonschema_3_1: jsonschema >= 3.1, <3.2
    jsonschema_3_2: jsonschema >= 3.2, <3.3
    pyyaml_3_13: pyyaml >=3.13, <3.14
    pyyaml_5_1:  pyyaml >=5.1,  <5.2
    pyyaml_5_2:  pyyaml >=5.2,  <5.3
    pyyaml_5_3:  pyyaml >=5.3,  <5.4

setenv = TOXINIDIR = {toxinidir}

passenv =
    HOME

commands =
    py.test {posargs}

extras =
    all
    testing
