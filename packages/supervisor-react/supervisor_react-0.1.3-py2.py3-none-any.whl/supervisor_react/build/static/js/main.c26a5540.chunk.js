(this["webpackJsonpsupervisor-react"]=this["webpackJsonpsupervisor-react"]||[]).push([[0],{124:function(e,t,n){e.exports=n(168)},136:function(e,t){},138:function(e,t){},168:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),s=n(9),c=(n(129),n(44)),l=n(87),i=n(4),u=n(216),p=n(229),m=n(227),f=n(226),d=n(236),h=n(225),E=n(218),v=n(171),g=n(224),P=n(230),b=n(235),O=n(172),A=n(232),w=n(221),N=n(222),x=n(223),j=n(220),C=n(219),k=n(217),S=n(233),I=n(114),T=n(214),G=n(215),R=n(234),y=n(3),F=n(111),U=n.n(F),L=n(85),D=n.n(L),B=n(86),z=n.n(B),W=n(109),K=n.n(W),H=n(113),$=n.n(H),V=n(110),X=n.n(V),J=n(112),M=n.n(J),q=n(49),Q=n.n(q),Y=n(11),Z=n.n(Y),_=n(17),ee=n(107),te=n(131);!function(e){e[e.STOPPED=0]="STOPPED",e[e.STARTING=10]="STARTING",e[e.RUNNING=20]="RUNNING",e[e.BACKOFF=30]="BACKOFF",e[e.STOPPING=40]="STOPPING",e[e.EXITED=100]="EXITED",e[e.FATAL=200]="FATAL",e[e.UNKNOWN=1e3]="UNKNOWN"}(r||(r={}));r.STOPPED,r.EXITED,r.FATAL,r.UNKNOWN;var ne,re=[r.RUNNING,r.BACKOFF,r.STARTING];!function(e){e[e.FATAL=2]="FATAL",e[e.RUNNING=1]="RUNNING",e[e.RESTARTING=0]="RESTARTING",e[e.SHUTDOWN=-1]="SHUTDOWN"}(ne||(ne={}));var ae=function e(t){var n=this;Object(ee.a)(this,e),this.client=void 0,this.setProcesses=void 0,this.methodCall=function(e,t){return new Promise((function(r,a){return n.client.methodCall(e,t,(function(e,t){return e?a(e):r(t)}))}))},this.getSupervisorVersion=function(){return n.methodCall("supervisor.getSupervisorVersion",[])},this.getState=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.getState",[]);case 2:return e.abrupt("return",e.sent.statename);case 3:case"end":return e.stop()}}),e)}))),this.getAllProcessInfo=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.methodCall("supervisor.getAllProcessInfo",[]);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.setProcesses.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),this.startProcess=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startProcessGroup=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startProcessGroup",[t]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startAllProcesses=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startAllProcesses",[]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.stopProcess=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopProcessGroup=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopProcessGroup",[t]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopAllProcesses=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopAllProcesses",[]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.restartProcess=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!re.includes(t.state)){e.next=4;break}return e.next=4,n.stopProcess(t);case 4:return e.prev=4,e.next=7,n.startProcess(t);case 7:return e.finish(4);case 8:case"end":return e.stop()}}),e,null,[[0,,4,8]])})));return function(t){return e.apply(this,arguments)}}(),this.restartProcessGroup=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stopProcessGroup(t);case 2:return e.next=4,n.startProcessGroup(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.restartAllProcesses=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stopAllProcesses();case 2:return e.next=4,n.startAllProcesses();case 4:case"end":return e.stop()}}),e)}))),this.clearProcessLogs=function(e){return n.methodCall("supervisor.clearProcessLogs",["".concat(e.group,":").concat(e.name)])},this.clearAllProcessLogs=function(){return n.methodCall("supervisor.clearAllProcessLogs",[])},this.client=te.createClient({host:window.location.hostname,port:window.location.port,path:"/RPC2"}),this.setProcesses=t},oe=function(e){var t=e.title,n=Object(l.a)(e,["title"]);return o.a.createElement(S.a,{title:t},o.a.createElement(p.a,{component:"span"},o.a.createElement(v.a,n)))},se=function(e){var t=e.supervisor,n=Object(l.a)(e,["supervisor"]),r=Object(a.useState)(""),s=Object(c.a)(r,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){t.getSupervisorVersion().then(u)}),[]),o.a.createElement(R.a,n,o.a.createElement(T.a,null,"About"),o.a.createElement(G.a,{dividers:!0},o.a.createElement("ul",null,o.a.createElement("li",null,"supervisor: ",i),o.a.createElement("li",null,"supervisor-react: 0.1.3"))))},ce=Object(i.a)({root:{flexGrow:1}})(I.a),le=function(e){var t=e.supervisor,n=Object(a.useState)(null),r=Object(c.a)(n,2),s=r[0],l=r[1],i=o.a.useState(!1),p=Object(c.a)(i,2),m=p[0],f=p[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{position:"static"},o.a.createElement(k.a,null,o.a.createElement(v.a,{color:"inherit",onClick:function(e){return l(e.currentTarget)}},o.a.createElement(K.a,null)),o.a.createElement(P.a,{anchorEl:s,open:null!==s,onClose:function(){return l(null)}},o.a.createElement(b.a,{onClick:function(e){return t.stopAllProcesses()}},"Stop all"),o.a.createElement(b.a,{onClick:function(e){return t.startAllProcesses()}},"Start All"),o.a.createElement(b.a,{onClick:function(e){return t.restartAllProcesses()}},"Restart All"),o.a.createElement(b.a,{onClick:function(e){return t.clearAllProcessLogs()}},"Clear All"),o.a.createElement(b.a,{onClick:function(e){l(null),f(!0)}},"About")),o.a.createElement(ce,{variant:"h5"},"Supervisor"),o.a.createElement(S.a,{title:"Reload Supervisor"},o.a.createElement(v.a,{color:"inherit",onClick:function(e){return t.getAllProcessInfo()}},o.a.createElement(X.a,null))))),o.a.createElement(se,{supervisor:t,open:m,onClose:function(){return f(!1)}}))},ie=Object(i.a)({root:{minHeight:45,padding:0,"&$expanded":{margin:0,minHeight:45}},content:{margin:0,minHeight:45,"&$expanded":{margin:0}},expanded:{}})(E.a),ue=Object(i.a)({root:{"& td:nth-child(1)":{width:140},"& td:nth-child(2)":{width:140},"& td:nth-child(3)":{textAlign:"center",width:113},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(C.a),pe=Object(i.a)((function(e){var t=e.palette;return{all:{color:t.success.main},some:{color:t.success.light},none:{color:t.warning.light}}}))((function(e){var t=e.running,n=e.length,r=e.classes;return o.a.createElement(p.a,{component:"span",className:t===n?r.all:0===t?r.none:r.some},t,"/",n)})),me=Object(i.a)((function(e){return{root:{color:e.palette.success.main}}}))(U.a),fe=Object(i.a)((function(e){return{root:{color:e.palette.error.main}}}))(D.a),de=Object(i.a)((function(e){return{root:{color:e.palette.warning.main}}}))(D.a),he=function(e){var t=e.process,n=e.supervisor,a=re.includes(t.state)?n.stopProcess:n.startProcess;return o.a.createElement(S.a,{title:t.name},o.a.createElement(v.a,{size:"small",onClick:function(e){e.stopPropagation(),a(t)}},re.includes(t.state)?o.a.createElement(me,null):t.state===r.FATAL?o.a.createElement(fe,null):o.a.createElement(de,null)))},Ee=function(e){var t=e.value,n=e.processes,r=e.supervisor,a=Q.a.assign({RUNNING:0,STOPPED:0},Q.a.countBy(n,(function(e){return re.includes(e.state)?"RUNNING":"STOPPED"})));return o.a.createElement(ie,null,o.a.createElement(j.a,{component:O.a,elevation:0},o.a.createElement(w.a,{size:"small"},o.a.createElement(N.a,null,o.a.createElement(ue,null,o.a.createElement(x.a,null,t),o.a.createElement(x.a,null),o.a.createElement(x.a,null,o.a.createElement(pe,{running:a.RUNNING,length:n.length})),o.a.createElement(x.a,null,n.map((function(e){return o.a.createElement(he,{key:e.name,process:e,supervisor:r})}))),o.a.createElement(x.a,{padding:"none"},o.a.createElement(oe,{title:"Stop Group",color:"primary",onClick:function(e){e.stopPropagation(),r.stopProcessGroup(t)},disabled:0===a.RUNNING},o.a.createElement(M.a,{fontSize:"small"})),o.a.createElement(oe,{title:"Start",color:"primary",onClick:function(e){e.stopPropagation(),r.startProcessGroup(t)},disabled:a.RUNNING===n.length},o.a.createElement($.a,{fontSize:"small"})),o.a.createElement(oe,{title:"Restart",color:"primary",onClick:function(e){e.stopPropagation(),r.restartProcessGroup(t)}},o.a.createElement(z.a,{fontSize:"small"}))),o.a.createElement(x.a,null))))))},ve=Object(i.a)((function(e){var t=e.palette;return{root:{borderRadius:6,color:t.error.contrastText,padding:"2px 4px"},running:{backgroundColor:t.success.main},stopped:{backgroundColor:t.warning.light},fatal:{backgroundColor:t.success.main}}}))((function(e){var t=e.process,n=e.classes;return o.a.createElement(p.a,{component:"span",className:Object(y.a)(n.root,re.includes(t.state)?n.running:t.state!==r.FATAL?n.stopped:n.fatal)},t.statename)})),ge=Object(i.a)({root:{"& td:nth-child(1)":{width:140},"& td:nth-child(2)":{width:140},"& td:nth-child(3)":{width:113},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(C.a),Pe=Object(i.a)({root:{display:"inline-block",textAlign:"center",width:88}})(p.a),be=function(e){var t=e.process;return o.a.createElement(ge,null,o.a.createElement(x.a,null),o.a.createElement(x.a,null,t.name),o.a.createElement(x.a,{padding:"none",align:"center"},o.a.createElement(ve,e)),o.a.createElement(x.a,null,t.description),o.a.createElement(x.a,{padding:"none"},o.a.createElement(Pe,{component:"span"},o.a.createElement(A.a,{size:"small",checked:re.includes(t.state),onChange:function(n){return(re.includes(t.state)?e.supervisor.stopProcess:e.supervisor.startProcess)(t)}})),o.a.createElement(oe,{title:"Restart",color:"primary",onClick:function(n){return e.supervisor.restartProcess(t)}},o.a.createElement(z.a,{fontSize:"small"}))),o.a.createElement(x.a,null,o.a.createElement(g.a,{href:"logtail/".concat(t.group,":").concat(t.name)},"stdout"),"\xa0",o.a.createElement(g.a,{href:"logtail/".concat(t.group,":").concat(t.name,"/stderr")},"stderr")))},Oe=Object(i.a)({root:{padding:0}})(h.a),Ae=function(e){return o.a.createElement(Oe,null,o.a.createElement(j.a,null,o.a.createElement(w.a,{size:"small"},o.a.createElement(N.a,null,e.processes.map((function(t){return o.a.createElement(be,Object.assign({key:t.name,process:t},e))}))))))},we=Object(i.a)({root:{"&$expanded":{margin:0},backgroundColor:"unset"},expanded:{}})(d.a),Ne=function(e){return o.a.createElement(we,{elevation:0},o.a.createElement(Ee,e),o.a.createElement(Ae,e))},xe=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],s=new ae(r);return Object(a.useEffect)((function(){s.getAllProcessInfo()}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,null),o.a.createElement(m.a,{fixed:!0},o.a.createElement(le,{supervisor:s}),Q()(n).groupBy("group").toPairs().sortBy().map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return o.a.createElement(Ne,{key:n,value:n,processes:Q.a.sortBy(r,"name"),supervisor:s})})).value()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.render)(o.a.createElement(a.StrictMode,null,o.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[124,1,2]]]);