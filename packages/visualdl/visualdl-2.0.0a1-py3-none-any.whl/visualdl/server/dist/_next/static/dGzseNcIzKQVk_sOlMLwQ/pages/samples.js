(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Fb3U:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/samples",function(){return n("aMnP")}])},MwrP:function(e,t,n){var r=n("4uJK"),a=n("kkM+"),c=n("bvyN"),o=n("wxYD"),i=n("9y2L"),u=n("3ajY"),l=n("CbIe"),s=n("Qd2C"),f="[object Map]",p="[object Set]",g=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||c(e)))return!e.length;var t=a(e);if(t==f||t==p)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(g.call(e,n))return!1;return!0}},aMnP:function(e,t,n){"use strict";n.r(t);var r=n("zjfJ"),a=n("HbGN"),c=n("9bu8"),o=n("ERkP"),i=n.n(o),u=n("KBf4"),l=n("s8Q3"),s=n("PKwP"),f=n("QRo2"),p=n("1HTM"),g=n("c4AY"),b=n("Obvh"),m=n("r8eb"),d=n("zqQH"),j=n.n(d),O=n("Uqjl"),h=n("O1Fn"),v=i.a.createElement,w=function(e){var t=e.src,n=e.cache,r=Object(c.d)("common").t,a=Object(o.useState)(""),i=a[0],u=a[1],l=Object(h.a)(null!==t&&void 0!==t?t:null,O.a,{dedupingInterval:null!==n&&void 0!==n?n:2e3}),s=l.data,f=l.error,p=l.loading;return Object(o.useLayoutEffect)((function(){if(s){var e;return e=URL.createObjectURL(s),u(e),function(){e&&URL.revokeObjectURL(e)}}}),[s]),p?v(j.a,{color:m.D,size:"10px"}):f?v("div",null,r("error")):v("img",{src:i})},y=n("lXyp"),C=n("j/s1"),x=i.a.createElement,P=C.c.div.withConfig({displayName:"StepSlider__Label",componentId:"sc-1er4gsv-0"})(["color:",";font-size:",";margin-bottom:",";"],m.L,Object(m.p)(12),Object(m.p)(5)),S=Object(C.c)(y.a).withConfig({displayName:"StepSlider__FullWidthRangeSlider",componentId:"sc-1er4gsv-1"})(["width:100%;"]),_=function(e){var t,n=e.onChange,r=e.onChangeComplete,a=e.value,u=e.steps,l=Object(c.d)("samples").t,s=Object(o.useState)(a),f=s[0],p=s[1];Object(o.useEffect)((function(){return p(a)}),[a]);var g=Object(o.useCallback)((function(e){p(e),null===n||void 0===n||n(e)}),[n]);return x(i.a.Fragment,null,x(P,null,"".concat(l("step"),": ").concat(null!==(t=u[f])&&void 0!==t?t:"...")),x(S,{min:0,max:u.length?u.length-1:0,step:1,value:f,onChange:g,onChangeComplete:r}))},k=n("MwrP"),E=n.n(k),R=n("JBtm"),T=n.n(R),I=i.a.createElement,z=Object(m.p)(430),L=Object(m.p)(384),M=C.c.div.withConfig({displayName:"SampleChart__Wrapper",componentId:"sc-1gq2xxh-0"})([""," padding:",";display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;> *{flex-grow:0;flex-shrink:0;}"],Object(m.I)(L,z),Object(m.p)(20)),N=C.c.div.withConfig({displayName:"SampleChart__Title",componentId:"sc-1gq2xxh-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:",";> h4{font-size:",";font-weight:700;flex-shrink:1;flex-grow:1;padding:0;margin:0;","}> span{font-size:",";flex-shrink:0;flex-grow:0;color:",";}"],Object(m.p)(20),Object(m.p)(16),Object(m.o)(),Object(m.p)(14),m.L),D=C.c.div.withConfig({displayName:"SampleChart__Container",componentId:"sc-1gq2xxh-2"})(["flex-grow:1;flex-shrink:1;margin-top:",";display:flex;justify-content:center;align-items:center;overflow:hidden;> img{"," object-fit:",";flex-shrink:1;}"],Object(m.p)(20),Object(m.I)("100%"),(function(e){return e.fit?"contain":"scale-down"})),F=function(e){var t,n=e.run,r=e.tag,a=e.fit,i=e.running,u=Object(c.d)("common").t,l=Object(h.b)("/images/list?".concat(T.a.stringify({run:n,tag:r})),!!i),s=l.data,f=l.error,p=l.loading,g=Object(o.useState)(0),b=g[0],d=g[1],O=Object(o.useState)(),v=O[0],y=O[1],C=Object(o.useRef)({}),x=Object(o.useRef)(null);Object(o.useEffect)((function(){Object.values(C.current).forEach((function(e){var t=e.timer;return clearTimeout(t)})),C.current={}}),[r,n]);var P=Object(o.useCallback)((function(){if(s){var e=function(e,t,n,r){return"/images/image?".concat(T.a.stringify({index:e,ts:r,run:t,tag:n}))}(b,n,r,s[b].wallTime);C.current[b]={src:e,timer:setTimeout((function(){var e;e=b,delete C.current[e]}),3e5)},y(e)}}),[b,n,r,s]);Object(o.useEffect)((function(){if(C.current[b])y(C.current[b].src);else{if(!E()(C.current))return x.current=setTimeout(P,500),function(){x.current&&clearTimeout(x.current)};P()}}),[b,P]);var S=Object(o.useMemo)((function(){return p||!C.current[b]?I(j.a,{color:m.D,size:"10px"}):!s&&f?I("span",null,u("error")):E()(s)?I("span",null,u("empty")):I(w,{src:v,cache:3e5})}),[p,f,s,b,v,u]);return I(M,null,I(N,null,I("h4",null,r),I("span",null,n)),I(_,{value:b,steps:null!==(t=null===s||void 0===s?void 0:s.map((function(e){return e.step})))&&void 0!==t?t:[],onChange:d,onChangeComplete:P}),I(D,{fit:a},S))},U=n("lvWc"),q=n("C34g"),J=n("t2fH"),H=i.a.createElement;function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K=function(){var e=Object(c.d)(["samples","common"]).t,t=Object(o.useState)(!0),n=t[0],m=t[1],d=Object(J.a)("images",n),j=d.runs,O=d.tags,h=d.selectedRuns,v=d.selectedTags,w=d.onChangeRuns,y=d.onFilterTags,C=d.loadingRuns,x=d.loadingTags,P=Object(o.useMemo)((function(){return v.reduce((function(e,t){var n=t.runs,c=Object(a.a)(t,["runs"]);return Array.prototype.push.apply(e,n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,{run:e})}))),e}),[])}),[v]),S=Object(o.useState)(!1),_=S[0],k=S[1],E=H("section",null,H(g.a,{runs:j,value:h,onChange:w}),H(u.a,null),H(s.a,{value:_,onChange:k},e("show-actual-size")),H(b.a,{running:n,onToggle:m})),R=Object(o.useCallback)((function(e){var t=e.run,r=e.label;return H(F,{run:t,tag:r,fit:!_,running:n})}),[_,n]);return H(i.a.Fragment,null,H(p.a,{url:"/runs"}),H(p.a,{url:"/images/tags"}),H(q.a,null,e("common:samples")),H(f.a,{aside:E,loading:C},H(U.a,{tags:O,onChange:y}),H(l.a,{items:P,withChart:R,loading:C||x})))};K.getInitialProps=function(){return{namespacesRequired:["samples","common"]}};t.default=K}},[["Fb3U",1,2,0,3,4,5,6,9,10,8,13]]]);