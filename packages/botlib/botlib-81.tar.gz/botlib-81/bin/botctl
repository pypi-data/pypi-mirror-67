#!/usr/bin/python3 -u
# BOTLIB - Framework to program bots.
#
# bin/bot (irc bot)

import os,sys ; sys.path.insert(0, os.getcwd())

import bot
import lo
import logging
import os
import time

from bot.krn import Kernel
from lo.csl import Console
from lo.shl import daemon, execute, parse_cli

opts = [
    ('-m', '--modules', 'store', str, "bot.shw", 'modules to load.', 'modules'),
    ('-l', '--loglevel', 'store', str, "error", 'set loglevel.', 'level'),
]

def main():
    lo.workdir = "/var/lib/botd"
    k = Kernel()
    mods = k.walk("bot")
    k.scan(mods)
    k.cmd(" ".join(sys.argv[1:]))
    
execute(main)
os._exit(0)
