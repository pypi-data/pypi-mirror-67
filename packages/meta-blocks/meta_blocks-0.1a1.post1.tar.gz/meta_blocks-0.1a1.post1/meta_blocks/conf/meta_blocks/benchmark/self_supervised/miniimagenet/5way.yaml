# Configuration for the self-supervised 5-way mini-ImageNet benchmark.
meta_blocks:
  train:
    meta_dataset:
      batch_size: 2
      num_classes: 5
    tasks:
      - set_name: train
        log_dir: train
        config:
          name: self_supervised
          num_augmented_shots: 1
          inverse: false
    max_steps: 20000
    log_interval: 10
    save_interval: 100
  eval:
    meta_dataset:
      batch_size: 2
      num_classes: 5
    tasks:
      # Train.
      - set_name: train
        log_dir: eval/train/oracle_1shot
        config:
          name: limited_supervised
          num_query_shots: 1
          num_support_shots: 1
          max_labeled_points: 1000
        sampler:
          name: uniform
          stratified: true
      - set_name: train
        log_dir: eval/train/oracle_5shot
        config:
          name: limited_supervised
          num_query_shots: 1
          num_support_shots: 5
          max_labeled_points: 5000
        sampler:
          name: uniform
          stratified: true
      # Valid.
      - set_name: valid
        log_dir: eval/valid/oracle_1shot
        config:
          name: limited_supervised
          num_query_shots: 1
          num_support_shots: 1
          max_labeled_points: 1000
        sampler:
          name: uniform
          stratified: true
      - set_name: valid
        log_dir: eval/valid/oracle_5shot
        config:
          name: limited_supervised
          num_query_shots: 1
          num_support_shots: 5
          max_labeled_points: 5000
        sampler:
          name: uniform
          stratified: true
      # Test.
      - set_name: test
        log_dir: eval/test/oracle_1shot
        config:
          name: limited_supervised
          num_query_shots: 1
          num_support_shots: 1
          max_labeled_points: 1000
        sampler:
          name: uniform
          stratified: true
      - set_name: test
        log_dir: eval/test/oracle_5shot
        config:
          name: limited_supervised
          num_query_shots: 1
          num_support_shots: 5
          max_labeled_points: 5000
        sampler:
          name: uniform
          stratified: true
    repetitions: 10
  run:
    seed: 1
