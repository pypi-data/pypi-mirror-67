(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{34:function(e,t,n){e.exports=n(47)},38:function(e,t,n){},40:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),l=n.n(o),i=(n(38),n(21)),c=n.n(i),u=n(24),s=n(3),m=n(4),d=n(5);n(40);function p(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: row;\n    order: 1;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 1em;\n"]);return p=function(){return e},e}function f(){var e=Object(m.a)(["\n    width: auto;\n    height: auto;\n    padding: 1em;\n    background-color: #B2BEC3;\n    border: 2px solid #B2BEC3;\n    border-radius: 5px;\n    color: #FFFFFF;\n    font-weight: 600;\n    margin: 1em;\n    outline: 0;\n    &:focus {\n        outline: 0;\n    }\n"]);return f=function(){return e},e}function g(){var e=Object(m.a)(["\n    width: auto;\n    height: auto;\n    padding: 1em;\n    background-color: #000000;\n    border: 2px solid #000000;\n    border-radius: 5px;\n    color: #FFFFFF;\n    font-weight: 600;\n    margin: 1em;\n    outline: 0;\n    &:hover {\n        color: #000000;\n        background-color: #DFF9FB;\n        cursor: pointer;\n    }\n    &:focus {\n        outline: 0;\n    }\n"]);return g=function(){return e},e}var E=d.a.button(g()),h=d.a.button(f()),v=d.a.div(p()),b=function(e){return r.a.createElement(v,null,e.hasPrevious?r.a.createElement(E,{id:"previousModule"},"previous",r.a.createElement("br",null),"module"):r.a.createElement(h,null,"previous",r.a.createElement("br",null),"module"),r.a.createElement(E,{id:"rootModule"},"root",r.a.createElement("br",null),"module"),r.a.createElement(E,{id:"resetRotation"},"reset",r.a.createElement("br",null),"rotation"),r.a.createElement(E,{id:"resetPosition"},"reset",r.a.createElement("br",null),"position"))};function y(){var e=Object(m.a)(["\n    font-size: small;\n    word-wrap: break-word;\n    padding: 0;\n    margin: 0;\n    text-decoration: none;\n    color: #4834D4;\n    &:hover {\n        cursor: pointer;\n    }\n    &:active {\n        color: #EB4D4B;\n    }\n"]);return y=function(){return e},e}function w(){var e=Object(m.a)(["\n    font-weight: bold;\n    font-size: small;\n    word-wrap: break-word;\n    padding: 0;\n    margin: 0;\n    &:hover {\n        cursor: text;\n    }\n"]);return w=function(){return e},e}function k(){var e=Object(m.a)(["\n    font-size: small;\n    word-wrap: break-word;\n    padding: 0;\n    margin: 0;\n    &:hover {\n        cursor: text;\n    }\n"]);return k=function(){return e},e}function j(){var e=Object(m.a)(["\n    font-size: large;\n    word-wrap: break-word;\n    margin: 0;\n    &:hover {\n        cursor: text;\n    }\n"]);return j=function(){return e},e}var O=d.a.h2(j()),x=d.a.p(k()),F=d.a.p(w()),S=d.a.a(y());function P(){var e=Object(m.a)(["\n    margin: 1em;\n    padding: 0.5em 0;\n    background-color: white;\n    border: 2px solid #95AFC0;\n    border-radius: 10px;\n    overflow: scroll;\n"]);return P=function(){return e},e}function B(){var e=Object(m.a)(["\n    padding: 0.1em 0.5em;\n    margin: 0.1em 0.5em;\n    text-align: left;\n"]);return B=function(){return e},e}function z(){var e=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    white-space: pre;\n    padding: 0;\n    margin: 0;\n"]);return z=function(){return e},e}var C=d.a.div(z()),L=d.a.div(B()),M=d.a.div(P()),I=[.75,.75,.75],T=I,N=[1.5,1.5,1.5],A=[.5,.5,.5],D=function(){var e=function(e){return"#"+e.toString(16)};return r.a.createElement(M,{style:{overflow:"visible"}},r.a.createElement(L,null,r.a.createElement(O,null,r.a.createElement("strong",null,"visunn"),": how to")),r.a.createElement(L,null,r.a.createElement(x,null,r.a.createElement("strong",null,"hover")," over a node to display its info below"),r.a.createElement(x,null,r.a.createElement("strong",null,"left click")," on a module to open its contents")),r.a.createElement(L,null,r.a.createElement(x,null,r.a.createElement("strong",null,"left click + drag")," to rotate"),r.a.createElement(x,null,r.a.createElement("strong",null,"right click + drag")," to pan"),r.a.createElement(x,null,r.a.createElement("strong",null,"scroll")," to zoom")),r.a.createElement(L,null,r.a.createElement(C,null,r.a.createElement(F,{style:{color:e(4732116)}},"purple"),r.a.createElement(x,null," blocks are op modules")),r.a.createElement(C,null,r.a.createElement(F,{style:{color:e(2270899)}},"blue"),r.a.createElement(x,null," blocks are input nodes")),r.a.createElement(C,null,r.a.createElement(F,{style:{color:e(15766315)}},"orange"),r.a.createElement(x,null," blocks are output nodes")),r.a.createElement(C,null,r.a.createElement(F,{style:{color:e(5463144)}},"gray"),r.a.createElement(x,null," blocks are op nodes"))))};function R(){var e=Object(m.a)(["\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: left;\n    order: 2;\n    overflow: auto;\n"]);return R=function(){return e},e}function G(){var e=Object(m.a)(["\n    margin: 0;\n    padding: 0;\n"]);return G=function(){return e},e}function J(){var e=Object(m.a)(["\n    margin: 0;\n    padding-left: 20px;\n"]);return J=function(){return e},e}var W=d.a.ul(J()),_=d.a.li(G()),K=d.a.div(R()),U=function(e){var t=function(t,n){if(0===e.meta[t].length)return r.a.createElement(r.a.Fragment,null);var a=e.meta[t].map((function(e,t){return r.a.createElement(_,{key:t},r.a.createElement(x,null,"("+e.join(", ")+")"))}));return[r.a.createElement(F,{key:"header"},n),r.a.createElement(W,{key:"contents"},a)]},n=function(t,n){if(t in e.meta){var a=e.meta[t].map((function(e,t){return r.a.createElement(_,{key:t},r.a.createElement(x,null,e))}));return[r.a.createElement(F,{key:"header"},n),r.a.createElement(W,{key:"contents"},a)]}return r.a.createElement(r.a.Fragment,null)},a=r.a.createElement(r.a.Fragment,null);return null!==e.meta&&(a=[r.a.createElement(L,{key:"name"},r.a.createElement(F,null,"name"),function(){var t=e.meta.name,n=!1;"/"===t.slice(-1)&&(t=t.slice(0,-1),n=!0),t=t.split("/");for(var a=[],o=0;o<t.length;o++){var l=t[o];(o<t.length-1||n)&&(l+="/");var i=String(10*o);a.push(r.a.createElement(x,{key:o,style:{marginLeft:i+"px"}},l))}return a}()),r.a.createElement(L,{key:"op"},r.a.createElement(F,null,"op"),r.a.createElement(x,null,e.meta.op))],"input"!==e.type&&"visu::param"!==e.meta.op&&a.push(r.a.createElement(L,{key:"inputs"},n("input","inputs")),r.a.createElement(L,{key:"input shapes"},t("input_shapes","input shapes"))),"output"!==e.type&&a.push(r.a.createElement(L,{key:"outputs"},n("output","outputs")),r.a.createElement(L,{key:"output shapes"},t("output_shapes","output shapes"))),"module"===e.type&&a.push(r.a.createElement(L,{key:"params"},function(){if(!("params"in e.meta))return r.a.createElement(r.a.Fragment,null);var t=e.meta.params.map((function(e,t){return r.a.createElement(_,{key:t},r.a.createElement(x,null,e))}));return[r.a.createElement(F,{key:"header"},"params"),r.a.createElement(W,{key:"contents"},t)]}())),a=r.a.createElement(M,null,a)),r.a.createElement(K,null,r.a.createElement(D,null),a)};function V(){var e=Object(m.a)(["\n    position: relative;\n    max-height: 100vh;\n    max-width: 100vw;\n    height: 100%;\n    width: 25em;\n    display: flex;\n    flex-direction: column-reverse;\n    background-color: #DFF9FB;\n    border-color: #C7ECEE;\n    border: none;\n"]);return V=function(){return e},e}var $=d.a.div(V()),q=function(e){return Object(a.useEffect)((function(){var t=document.getElementById("previousModule"),n=document.getElementById("resetRotation"),a=document.getElementById("resetPosition"),r=document.getElementById("rootModule");null!==t&&(t.onclick=function(){if(e.tag.includes(";")){var t=e.tag.substring(0,e.tag.lastIndexOf(";"));e.setTag(t)}else e.setTag("root");return!0}),n.onclick=function(){return e.setRotation(!0),!0},a.onclick=function(){return e.setPosition(!0),!0},r.onclick=function(){e.setTag("root")}})),r.a.createElement($,null,r.a.createElement(b,{hasPrevious:e.hasPrevious}),r.a.createElement(U,{meta:e.meta,type:e.type}))},H=n(6);function Q(){var e=Object(m.a)(["\n    text-align: left;\n    white-space: pre;\n    background-color: #DFF9FB;\n    padding: 0.5em;\n    border: 1px solid #C7ECEE;\n    border-radius: 5px;\n"]);return Q=function(){return e},e}var X=d.a.div(Q()),Y=function(e){var t=Object(H.e)(),n=t.scene,a=t.camera,o=a.rotation.x-n.rotation.x>0?1:-1,l=a.rotation.y-n.rotation.y>0?1:-1,i=a.rotation.z-n.rotation.z>0?1:-1;return r.a.createElement(H.b,{position:[e.x+o,e.y+l,i]},r.a.createElement(X,null,function(){var t=e.name,n=!1;"/"===t.slice(-1)&&(t=t.slice(0,-1),n=!0),t=t.split("/");for(var a=[],o=0;o<t.length;o++){var l=" ".repeat(3*o)+t[o];(o<t.length-1||n)&&(l+="/"),a.push(r.a.createElement(x,{key:o},l))}return a}()))},Z=function(e){var t=Object(s.a)(e.coords,2),n=t[0],o=t[1],l=Object(a.useState)(!1),i=Object(s.a)(l,2),c=i[0],u=i[1],m="module"===e.type?[4732116,15420747,N]:"input"===e.type?[2270899,2270899,I]:"output"===e.type?[15766315,15766315,T]:[5463144,5463144,A],d=Object(s.a)(m,3),p=d[0],f=d[1],g=d[2];return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(Y,{name:e.meta.name,op:e.meta.op,x:n,y:o}):r.a.createElement(r.a.Fragment,null),r.a.createElement("mesh",{position:[n,o,0],rotation:[0,0,0],receiveShadow:!0,onPointerUp:function(){return"module"===e.type&&(e.setTag(e.name.replace(/\//g,";").slice(0,-1)),document.body.style.cursor="default",!0)},onPointerOver:function(t){return u(!0),"module"===e.type&&(document.body.style.cursor="pointer"),e.setName(e.name),!0},onPointerOut:function(t){return u(!1),"module"===e.type&&(document.body.style.cursor="default"),!0}},r.a.createElement("boxGeometry",{attach:"geometry",args:g,key:"geo"}),r.a.createElement("meshLambertMaterial",{attach:"material",color:c?f:p,key:"mat"})))},ee=function(e){var t=function(t){return"/"===t.slice(-1)?"module":e.inputs.includes(t)?"input":e.outputs.includes(t)?"output":"node"};return Object.keys(e.coords).map((function(n,a){return r.a.createElement(Z,{key:a,name:n,meta:e.meta[n],coords:e.coords[n],type:t(n),setName:e.setName,setTag:e.setTag})}))},te=n(12),ne=function(e){var t=new Float32Array(e.vertices);return r.a.createElement("line",null,r.a.createElement("bufferGeometry",{attach:"geometry",key:"geo"},r.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:t.length/3,array:t,itemSize:3})),r.a.createElement("lineBasicMaterial",{attach:"material",color:"gray",key:"mat"}))},ae=function(e){for(var t=[],n=0,a=Object.keys(e.edges);n<a.length;n++){var o,l=a[n],i=Object(s.a)(e.coords[l],2),c=i[0],u=i[1],m=Object(te.a)(e.edges[l]);try{for(m.s();!(o=m.n()).done;){var d=o.value,p=Object(s.a)(e.coords[d],2),f=[c,u,0,p[0],p[1],0];t.push(r.a.createElement(ne,{vertices:f,key:d+"->"+l}))}}catch(g){m.e(g)}finally{m.f()}}return t},re=n(32);Object(H.c)({OrbitControls:re.a});var oe=function(e){var t=Object(a.useRef)(),n=Object(H.e)(),o=n.camera,l=n.scene,i=n.gl;return e.position&&(o.position.x=0,o.position.y=0,o.position.z=e.z),Object(H.d)((function(){t.current.update(),e.rotation&&(l.rotation.y+=.01,l.rotation.y>2*Math.PI&&(l.rotation.y-=2*Math.PI))})),r.a.createElement("orbitControls",{ref:t,args:[o,i.domElement],enableKeys:!0,enableDamping:!0,enablePan:!0,dampingFactor:.1,rotateSpeed:.75,maxPolarAngle:5*Math.PI/8,minPolarAngle:2*Math.PI/8})};function le(){var e=Object(m.a)(["\n    position: relative;\n    max-height: 100vh;\n    max-width: calc(100vw - 25em);\n    width: 100%;\n    height: 100%;\n"]);return le=function(){return e},e}var ie=d.a.div(le()),ce=function(e){var t=3*Object.keys(e.config.meta).length;return r.a.createElement(ie,null,r.a.createElement(H.a,{camera:{position:[0,0,e.zoom]},gl:{physicallyCorrectLights:!0}},r.a.createElement("ambientLight",{intensity:.75}),r.a.createElement("pointLight",{position:[0,0,5e3],intensity:.9,castShadow:!0}),r.a.createElement("pointLight",{position:[0,0,-5e3],intensity:.9,castShadow:!0}),r.a.createElement("pointLight",{position:[5e3,0,0],intensity:.5,castShadow:!0}),r.a.createElement("pointLight",{position:[-5e3,0,0],intensity:.5,castShadow:!0}),r.a.createElement("pointLight",{position:[0,5e3,0],intensity:.1,castShadow:!0}),r.a.createElement("pointLight",{position:[0,-5e3,0],intensity:.1,castShadow:!0}),r.a.createElement(oe,{rotation:e.rotation,position:e.position,z:t}),r.a.createElement(ee,{key:"nodes",meta:e.config.meta,coords:e.config.coords,inputs:e.config.inputs,outputs:e.config.outputs,setName:e.setName,setTag:e.setTag}),r.a.createElement(ae,{key:"edges",coords:e.config.coords,edges:e.config.edges})))};function ue(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    align-items: right;\n    justify-content: right;\n    text-align: right;\n    background-color: #F6E58D80;\n    right: 0;\n    bottom: 0;\n    padding: 0.5em;\n    border-top-left-radius: 0.5em;\n"]);return ue=function(){return e},e}var se=d.a.div(ue()),me=function(){return r.a.createElement(se,null,r.a.createElement(x,null,r.a.createElement("strong",null,"vincent liu"),", \xa92020"),r.a.createElement("div",{style:{display:"flex",whiteSpace:"pre"}},r.a.createElement(S,{href:"mailto:vliu15@stanford.edu"},"email"),r.a.createElement(x,null," ",r.a.createElement("strong",null,"|")," "),r.a.createElement(S,{href:"https://www.github.com/vliu15/visunn"},"github")))};function de(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    width: 100vw;\n    height: 100vh;\n"]);return de=function(){return e},e}var pe=d.a.div(de()),fe=function(){var e=Object(a.useState)("root"),t=Object(s.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(!1),i=Object(s.a)(l,2),m=i[0],d=i[1],p=Object(a.useState)({}),f=Object(s.a)(p,2),g=f[0],E=f[1],h=Object(a.useState)(!0),v=Object(s.a)(h,2),b=v[0],y=v[1],w=Object(a.useState)(!0),k=Object(s.a)(w,2),j=k[0],O=k[1],x=Object(a.useState)(null),F=Object(s.a)(x,2),S=F[0],P=F[1];Object(a.useEffect)((function(){(function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/"+n);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,E(a),y(!0),O(!0),d(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(a.useEffect)((function(){window.addEventListener("mousedown",(function(e){e||(e=window.event),e.target&&"CANVAS"===e.target.tagName&&y(!1),O(!1)}))}));return r.a.createElement("div",{className:"App"},r.a.createElement(pe,null,r.a.createElement(q,{hasPrevious:"root"!==n,setRotation:y,setPosition:O,tag:n,setTag:o,meta:m&&S in g.meta?g.meta[S]:null,type:function(e){return null===e?"":"/"===e.slice(-1)?"module":g.inputs.includes(e)?"input":g.outputs.includes(e)?"output":"node"}(S)}),m?r.a.createElement(ce,{rotation:b,position:j,config:g,setName:P,setTag:o}):r.a.createElement(r.a.Fragment,null),r.a.createElement(me,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.76cd4042.chunk.js.map